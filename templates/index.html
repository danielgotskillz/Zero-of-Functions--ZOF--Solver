<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ZOF Solver</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<div class="container">
<h1>ZOF â€” Zero of Functions Solver</h1>

<form method="post" class="row g-3">
  <div class="col-md-6">
    <label class="form-label">f(x)</label>
    <input name="fexpr" class="form-control" placeholder="x**3 - x - 2">
  </div>
  <div class="col-md-6">
    <label class="form-label">Method</label>
    <select name="method" class="form-select">
      <option value="bisection">Bisection</option>
      <option value="regula">Regula Falsi</option>
      <option value="secant">Secant</option>
      <option value="newton">Newton-Raphson</option>
      <option value="fixed">Fixed Point</option>
      <option value="modified">Modified Secant</option>
    </select>
  </div>

  <div class="col-md-3"><label>a</label><input name="a" class="form-control"></div>
  <div class="col-md-3"><label>b</label><input name="b" class="form-control"></div>
  <div class="col-md-3"><label>x0</label><input name="x0" class="form-control"></div>
  <div class="col-md-3"><label>x1</label><input name="x1" class="form-control"></div>

  <div class="col-md-3"><label>g(x)</label><input name="g" class="form-control"></div>
  <div class="col-md-3"><label>Delta</label><input name="delta" class="form-control" value="1e-3"></div>

  <div class="col-md-3"><label>Tol</label><input name="tol" class="form-control" value="1e-6"></div>
  <div class="col-md-3"><label>Max Iter</label><input name="max_iter" class="form-control" value="100"></div>

  <div class="col-12"><button class="btn btn-primary">Run</button></div>
</form>

{% if result %}
  <hr>
  {% if result.error %}
    <div class="alert alert-danger">{{ result.error }}</div>
  {% else %}
    <h3>Iterations</h3>
    <table class="table table-bordered table-sm">
      <thead><tr><th>Iter</th><th>x</th><th>f(x)</th><th>Error</th></tr></thead>
      <tbody>
      {% for r in result.rows %}
        <tr>
          <td>{{r[0]}}</td>
          <td>{{"{:.12g}".format(r[1])}}</td>
          <td>{{r[2] if r[2] is not none else "-"}}</td>
          <td>{{"{:.12g}".format(r[3])}}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    <h4>Final root: {{result.root}}</h4>
  {% endif %}
{% endif %}

</div>
</body>
</html>
